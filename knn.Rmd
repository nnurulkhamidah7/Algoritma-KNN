---
title: 'Algoritma KNN'
author: Nurul Khamidah-Institut Teknologi Statistika dan Bisnis Muhammadiyah
date: "`r Sys.Date()`"
output:
  prettydoc::html_pretty:
    theme: architect
    highlight: github
bibliography: references.bib
---

```{=html}
<style>
body{
text-align: justify}
</style>
```
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Algoritma KNN
K-Nearest Neighbors atau KNN adalah algoritma yang berfungsi untuk melakukan klasifikasi suatu data berdasarkan data pembelajaran (train data sets), yang diambil dari k tetangga terdekatnya (nearest neighbors). Dengan K merupakan banyaknya tetangga terdekat.


# Tahapan Algoritma KNN
tahapan algoritma 1. Menyiapkan Dataset
2. Menentukan Nilai K
3. Menghitung jarak antara data Trining dan data Testing ( Euclidean Distance )
4. Mengurutkan data berdasarkan jarak terkecil ( Rank )
5. Mengelompokkan data

# Eksperimen Algoritma KNN
## library
```{r}
library(caret)
data(iris)
head(iris)
```

```{r}
set.seed(300)
#Spliting data as training and test set. Using createDataPartition() function from caret. p is the percentage of data that goes to training. 
indxTrain <- createDataPartition(y = iris$Species,p = 0.75,list = FALSE)
training <- iris[indxTrain,]
testing <- iris[-indxTrain,]

#Checking distibution in original data and partitioned data
prop.table(table(training$Species)) * 100
```

```{r}
data(iris3)
iris3
```

```{r}
head(iris3[,,1])
```

```{r}
ir <- rbind(iris3[,,1],iris3[,,2],iris3[,,3])
head(ir)
```

```{r}
tail(ir)
``````

```{r}
sample(1:50,25)
```

```{r eval=FALSE}
ir1 <- nnet(ir[samp,], targets[samp,], size = 2, rang = 0.1,
            decay = 5e-4, maxit = 200)
```

```{r eval=FALSE}
ir1 

```

 a 4-2-3 network with 19 weights
options were - decay=5e-04



```{r eval=FALSE}
str(ir1)
```

```{r}
test.cl <- function(true, pred) {
    true <- max.col(true)
    cres <- max.col(pred)
    table(true, cres)
}
```

```{r eval=FALSE}
test.cl(targets[-samp,], predict(ir1, ir[-samp,]))
```

        cres
    true  1  2  3
      1 24  0  1
      2  0 25  0
      3  1  0 24

```{r}
set.seed(400)
ctrl <- trainControl(method="repeatedcv",repeats = 3) #,classProbs=TRUE,summaryFunction = twoClassSummary)
knnFit <- train(Species ~ ., data = training, method = "knn", trControl = ctrl, preProcess = c("center","scale"), tuneLength = 20)
#Output of kNN fit
knnFit
```

```{r}
#Plotting yields Number of Neighbours Vs accuracy (based on repeated cross validation)
plot(knnFit)
```



#referensi
https://rpubs.com/fajriyahakim/322155
